{"version":3,"file":"static/chunks/261-eaa4bf9cbf127b0a.js","mappings":"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","sources":["webpack://_N_E/./src/utils/Portal.tsx","webpack://_N_E/./src/utils/data.ts","webpack://_N_E/./src/utils/hooks.ts","webpack://_N_E/./src/utils/layout.ts","webpack://_N_E/./src/utils/vector.ts","webpack://_N_E/./src/utils/Portal.module.scss","webpack://_N_E/<anon>"],"sourcesContent":["'use client';\n\nimport clsx from \"clsx\";\nimport React, { useLayoutEffect, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { assignImm } from \"./data\";\nimport s from './Portal.module.scss';\n\nexport const Portal: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n    let [portalEl, setPortalEl] = useState<HTMLElement | null>(null);\n    useLayoutEffect(() => {\n         setPortalEl(document.getElementById('portal-container'));\n    }, []);\n    return portalEl ? createPortal(children, portalEl) : null;\n};\n\n\nexport const FullscreenOverlay: React.FC<{\n    className?: string,\n    onClick?: React.MouseEventHandler,\n    children: React.ReactNode,\n}> = ({ className, onClick, children }) => {\n\n    function handleClick(ev: React.MouseEvent) {\n        ev.stopPropagation();\n        if (ev.target === ev.currentTarget) {\n            onClick?.(ev);\n        }\n    };\n\n    return <Portal>\n\n        <div className={clsx(s.fullscreenOverlay, className)} onClick={handleClick}>\n            {children}\n        </div>\n    </Portal>;\n}\n\nexport const ModalWindow: React.FC<{\n    className?: string,\n    backdropClassName?: string,\n    onBackdropClick?: React.MouseEventHandler,\n    children: React.ReactNode,\n}> = ({ className, backdropClassName, onBackdropClick, children }) => {\n\n    return <FullscreenOverlay className={clsx(s.modalWindowBackdrop, backdropClassName)} onClick={onBackdropClick}>\n        <div className={clsx(s.modalWindow, className)}>\n            {children}\n        </div>\n    </FullscreenOverlay>;\n}\n\nexport enum PopupPos {\n    TopLeft,\n    BottomLeft, // we position the popup below the target, and left-align it\n}\n\nexport const Popup: React.FC<{\n    targetEl: HTMLElement | null,\n    placement: PopupPos,\n    children?: React.ReactNode,\n    className?: string,\n    closeBackdrop?: boolean,\n    offsetX?: number,\n    offsetY?: number,\n    onClose?: () => void,\n}> = ({ targetEl, placement, children, className, closeBackdrop, onClose, offsetX, offsetY }) => {\n    let [popupEl, setPopupEl] = useState<HTMLElement | null>(null);\n    let targetBcr = useWatchElementRect(targetEl, true);\n    let popupBcr = useWatchElementRect(popupEl); // we don't need position info for the popup (would cause an infinite loop)\n\n    let pos = computeTransform(targetBcr, popupBcr, placement);\n\n    let el = <div ref={setPopupEl} className={clsx(s.popup, className)} style={{\n        transform: `translate(${pos.x + (offsetX ?? 0)}px, ${pos.y + (offsetY ?? 0)}px)`,\n        left: 0,\n        top: 0,\n    }}>\n        {children}\n    </div>;\n\n    function handleClick(ev: React.MouseEvent) {\n        // ensure the click was directly on the backdrop & not a child\n        if (ev.target === ev.currentTarget) {\n            onClose?.();\n        }\n    }\n\n    return <Portal>\n        {closeBackdrop ? <div\n            className={s.popupBackdrop}\n            onClick={handleClick}\n            onMouseMove={ev => ev.stopPropagation()}\n            onMouseUp={ev => ev.stopPropagation()}\n            onMouseDown={ev => ev.stopPropagation()}\n        >{el}</div> : el}\n    </Portal>;\n};\n\nfunction computeTransform(targetBcr: DOMRect | null, popupBcr: DOMRect | null, placement: PopupPos) {\n    if (!targetBcr || !popupBcr) {\n        return { x: 0, y: 0 };\n    }\n\n    let x = 0;\n    let y = 0;\n\n    switch (placement) {\n        case PopupPos.BottomLeft:\n            x = targetBcr.x;\n            y = targetBcr.bottom;\n            break;\n        case PopupPos.TopLeft:\n            x = targetBcr.x;\n            y = targetBcr.y - popupBcr.height;\n            break;\n    }\n\n    return { x, y };\n}\n\nexport function useWatchElementRect(el: HTMLElement | null, includePosition = false) {\n    let [bcr, setBcr] = useState<DOMRect | null>(null);\n\n    useLayoutEffect(() => {\n        function handleChange() {\n            let bcr = el ? el.getBoundingClientRect() : null;\n            setBcr(prev => (el && prev) ? assignImm(prev, {\n                x: includePosition ? bcr!.x : 0,\n                y: includePosition ? bcr!.y : 0,\n                width: bcr!.width,\n                height: bcr!.height,\n            }) : bcr);\n        }\n\n        if (el) {\n            let observer = new ResizeObserver(handleChange);\n            observer.observe(el);\n            handleChange();\n            return () => {\n                observer.unobserve(el);\n                setBcr(null);\n            };\n        }\n    }, [el, includePosition]);\n    return bcr;\n}\n","import { Vec3 } from \"./vector\";\n\nexport function makeArray<T = number>(length: number, val?: T): T[] {\n    return new Array(length).fill(val ?? 0);\n}\n\nexport function makeArrayRange(length: number, min: number, max: number): number[] {\n    return new Array(length).fill(0).map((_, i) => min + i * (max - min) / (length - 1));\n}\n\nexport function oneHotArray(length: number, index: number, val: number, defaultVal: number = 0.0): number[] {\n    let arr = new Array(length).fill(defaultVal);\n    arr[index] = val;\n    return arr;\n}\n\nexport function assignImm<T>(target: T, source: Partial<T>): T {\n    let keys = Object.keys(source);\n    let changed = false;\n    target = target ?? {} as any;\n    for (let k of keys) {\n        let src = (source as any)[k];\n        let dst = (target as any)[k];\n        if ((src === dst) ||\n            (src instanceof Date && dst instanceof Date && +src === +dst) ||\n            (src instanceof Vec3 && dst instanceof Vec3 && src.distSq(dst) === 0.0)\n        ) {\n            continue;\n        }\n        changed = true;\n    }\n    return changed ? Object.assign({}, target, source) : target;\n}\n\nexport function assignImmFull<T>(target: T | null, source: T | null): T | null {\n    return source && target ? assignImm(target, source) : source;\n}\n\nexport function isNil(a: any): a is null | undefined {\n    return a === null || a === undefined;\n}\n\nexport function isNotNil<T>(a: T | null | undefined): a is T {\n    return a !== null && a !== undefined;\n}\n\nexport type StateSetter<T> = (action: React.SetStateAction<T>) => void;\n\nexport function applySetter<T>(setState: React.SetStateAction<T>, existing: T) {\n    return setState instanceof Function ? setState(existing) : setState;\n}\n\nexport function clamp(num: number, min: number, max: number) {\n    if (num < min) {\n        return min;\n    } else if (num > max) {\n        return max;\n    }\n    return num;\n}\n\nexport function base64ToArrayBuffer(base64: string) {\n    let binaryString = window.atob(base64);\n    let len = binaryString.length;\n    let bytes = new Uint8Array(len);\n    for (let i = 0; i < len; i++) {\n        bytes[i] = binaryString.charCodeAt(i);\n    }\n    return bytes.buffer;\n}\n\nexport function getOrAddToMap<K, V>(map: Map<K, V>, key: K, valueFn: () => V): V {\n    let existing = map.get(key);\n    if (existing === undefined) {\n        let value = valueFn();\n        map.set(key, value);\n        return value;\n    }\n    return existing;\n}\n\nexport function hasFlag(flags: number, flag: number) {\n    return (flags & flag) === flag;\n}\n","import { useEffect, useReducer, useRef, useState } from \"react\";\n\nexport function useFunctionRef<T extends ((...args: any[]) => any) | undefined>(fn: T): React.MutableRefObject<T> {\n    let ref = useRef<T>(fn);\n    useEffect(() => {\n        ref.current = fn;\n    }, [fn]);\n    return ref;\n}\n\nexport function useRequestAnimationFrame(active: boolean, cb: (dt: number) => void) {\n    let cbRef = useFunctionRef(cb);\n    useEffect(() => {\n        let stale = false;\n        let handle: number;\n        let prevTime: number | undefined;\n\n        function loop(time: number) {\n            let dt = (prevTime === undefined ? 16 : (time - prevTime)) / 1000;\n            prevTime = time;\n            cbRef.current(dt);\n            if (!stale) {\n                handle = requestAnimationFrame(loop);\n            }\n        }\n\n        if (active) {\n            handle = requestAnimationFrame(loop);\n            return () => {\n                stale = true;\n                cancelAnimationFrame(handle);\n            };\n        }\n    }, [active, cbRef]);\n}\n\nexport interface IIntervalOptions {\n    // run the callback immediately on mount\n    runImmediately?: boolean;\n}\n\nexport function useInterval(active: boolean, delay: number, cb: () => void, opts?: IIntervalOptions) {\n    let cbRef = useFunctionRef(cb);\n    let runImmediately = opts?.runImmediately ?? false;\n    useEffect(() => {\n        if (active) {\n            let handle = setInterval(cbRef.current, delay);\n            if (runImmediately) {\n                cbRef.current();\n            }\n            return () => clearInterval(handle);\n        }\n    }, [active, delay, cbRef, runImmediately]);\n}\n\nexport function logChangesFn(name: string) {\n    let prevValue: any = null;\n    return (currValue: any) => {\n        let changes = getChanges(prevValue, currValue);\n        prevValue = currValue;\n        changes && console.log(`${name} changed to`, changes);\n        return !!changes;\n    };\n\n    function getChanges(a: any, b: any) {\n        a = a || {};\n        b = b || {};\n        let keys = new Set<string>();\n        for (let k of [...Object.keys(a), ...Object.keys(b)]) {\n            a[k] !== b[k] && keys.add(k);\n        }\n        if (keys.size === 0) {\n            return null;\n        }\n        let changed: any = {};\n        for (let k of [...keys]) {\n            changed[k] = b[k];\n        }\n        return changed;\n    }\n}\n\nexport function useLogChanges(name: string, values: any) {\n    let [changesFn] = useState(() => logChangesFn(name));\n    return changesFn(values);\n}\n\n\nexport class Subscriptions {\n    subs = new Set<() => void>();\n    subscribe = (fn: () => void): (() => void) => {\n        this.subs.add(fn);\n        return () => this.subs.delete(fn);\n    }\n    notify = () => {\n        for (let sub of this.subs) {\n            sub();\n        }\n    }\n}\n\nexport function useSubscriptions(subscription: Subscriptions | null) {\n    let [, refresh] = useReducer(a => a + 1, 0);\n    useEffect(() => subscription?.subscribe(refresh), [subscription]);\n}\n","import { useEffect as useLayoutEffect, useState } from \"react\";\nimport { Vec3 } from \"./vector\";\nimport { useFunctionRef } from \"./hooks\";\n\nexport interface ILayout {\n    width: number;\n    height: number;\n    isDesktop: boolean;\n    isPhone: boolean;\n}\n\nexport function useScreenLayout() {\n    let [layout, setLayout] = useState<ILayout>({ width: 0, height: 0, isDesktop: true, isPhone: false });\n\n    useLayoutEffect(() => {\n        // check the media queries that we use in css land\n        let mediaQuery = window.matchMedia('screen and (max-width: 800px)');\n\n        function handleResize() {\n            setLayout({\n                width: window.innerWidth,\n                height: window.innerHeight,\n                isDesktop: !mediaQuery.matches,\n                isPhone: mediaQuery.matches,\n            });\n        }\n\n        handleResize();\n\n        window.addEventListener('resize', handleResize);\n        mediaQuery.addEventListener('change', handleResize);\n        return () => {\n            window.removeEventListener('resize', handleResize);\n            mediaQuery.removeEventListener('change', handleResize);\n        };\n    }, []);\n\n    return layout;\n}\n\nexport function useResizeChangeHandler(el: HTMLElement | undefined | null, handler: (size: Vec3, bcr: DOMRect) => void) {\n    let handlerRef = useFunctionRef(handler);\n    useLayoutEffect(() => {\n        if (!el) return;\n        function handleResize() {\n            let bcr = el!.getBoundingClientRect();\n            handlerRef.current(new Vec3(bcr.width, bcr.height, 0), bcr);\n        }\n        let observer = new ResizeObserver(handleResize);\n        observer.observe(el);\n        handleResize();\n        return () => observer.disconnect();\n    }, [el, handlerRef]);\n}\n","\n/* Design decisions for Vec3/Vec4\n\nMethods have immutable behavior (rather than in-place) for less error-prone usage, but that naturally\nmeans a drop in perf. Happy with this trade.\nAll methods only have at most 1 new Vec*, even if it means a bit more repetition.\n\nFact-check: false:\n    Inheriting from Array<number> seems to give good structure in V8. In particular, the number array\n    elements (as doubles) are inline in the array, and the initialization with the size means the array\n    is actually that size. It looks like there's an extra pointer hop from this class to get to the\n    actual array data which is not strictly ideal, but better than both Float64Array and 3 pointer hops\n    in the case of { x: number, y: number, z: number } (V8 doesn't do double de-boxing :( ).\n\nProbably due to inhieriting from Array<number>, the constructor is painfully slow, showing up in\nstack traces.\n\nBack to simple objects, on the idea that ones that live on the stack will get jitted away anyway.\n\nV8 shows Vec3 & Vec4 as having an 24 byte overhead, which... isn't toooo bad\n\n*/\n\nimport { clamp } from \"./data\";\n\nexport enum Dim {\n    X = 0,\n    Y = 1,\n    Z = 2,\n}\n\nexport class Vec3 {\n    x: number;\n    y: number;\n    z: number;\n    constructor(x: number = 0.0, y: number = 0.0, z: number = 0.0) {\n        this.x = +x;\n        this.y = +y;\n        this.z = +z;\n    }\n\n    add(a: Vec3): Vec3 { return new Vec3(this.x + a.x, this.y + a.y, this.z + a.z); }\n    sub(a: Vec3): Vec3 { return new Vec3(this.x - a.x, this.y - a.y, this.z - a.z); }\n    dot(a: Vec3): number { return this.x * a.x + this.y * a.y + this.z * a.z; }\n    mul(a: number): Vec3 { return new Vec3(this.x * a, this.y * a, this.z * a); }\n    mulAdd(a: Vec3, b: number): Vec3 { return new Vec3(this.x + a.x * b, this.y + a.y * b, this.z + a.z * b); }\n    lenSq(): number { return this.x * this.x + this.y * this.y + this.z * this.z; }\n    distSq(a: Vec3): number {\n        let dx = this.x - a.x;\n        let dy = this.y - a.y;\n        let dz = this.z - a.z;\n        return dx * dx + dy * dy + dz * dz;\n    }\n    len(): number { return Math.sqrt(this.lenSq()); }\n    dist(a: Vec3): number { return Math.sqrt(this.distSq(a)); }\n    normalize(): Vec3 { return this.mul(1.0 / Math.sqrt(this.lenSq())); }\n    mid(a: Vec3): Vec3 { return new Vec3((this.x + a.x) * 0.5, (this.y + a.y) * 0.5, (this.z + a.z) * 0.5); }\n    abs() { return new Vec3(Math.abs(this.x), Math.abs(this.y), Math.abs(this.z)); }\n    clone(): Vec3 { return new Vec3(this.x, this.y, this.z); }\n    toVec4(): Vec4 { return new Vec4(this.x, this.y, this.z, 1.0); }\n    round(): Vec3 { return new Vec3(Math.round(this.x), Math.round(this.y), Math.round(this.z)); }\n    round_(): Vec3 { this.x = Math.round(this.x); this.y = Math.round(this.y); this.z = Math.round(this.z); return this; }\n    copy_(a: Vec3) { this.x = a.x; this.y = a.y; this.z = a.z; }\n    static cross(a: Vec3, b: Vec3): Vec3 { return new Vec3(\n        a.y * b.z - a.z * b.y,\n        a.z * b.x - a.x * b.z,\n        a.x * b.y - a.y * b.x); }\n    writeToBuf(buf: Float32Array, offset: number) {\n        buf[offset + 0] = this.x;\n        buf[offset + 1] = this.y;\n        buf[offset + 2] = this.z;\n    }\n    static fromArray(a: ArrayLike<number>, offset: number = 0): Vec3 {\n        return new Vec3(a[offset + 0], a[offset + 1], a[offset + 2]);\n    }\n    setAt(i: number, v: number) {\n        switch (i) {\n        case 0: this.x = v; break;\n        case 1: this.y = v; break;\n        case 2: this.z = v; break;\n        }\n        return this;\n    }\n    addAt(i: number, v: number) {\n        switch (i) {\n        case 0: this.x += v; break;\n        case 1: this.y += v; break;\n        case 2: this.z += v; break;\n        }\n        return this;\n    }\n    getAt(i: number): number {\n        switch (i) {\n        case 0: return this.x;\n        case 1: return this.y;\n        case 2: return this.z;\n        }\n        return 0.0;\n    }\n    withSetAt(i: number, v: number): Vec3 { return this.clone().setAt(i, v); }\n    withAddAt(i: number, v: number): Vec3 { return this.clone().addAt(i, v); }\n    toString(dp: number = 3): string {\n        return `Vec3(${numMaxDp(this.x, dp)}, ${numMaxDp(this.y, dp)}, ${numMaxDp(this.z, dp)})`;\n    }\n    rotateAbout(k: Vec3, thetaRad: number) {\n        // https://en.wikipedia.org/wiki/Rodrigues%27_rotation_formula\n        // k must have unit length\n        let c = Math.cos(thetaRad);\n        let s = Math.sin(thetaRad);\n        let kCrossV = Vec3.cross(k, this);\n        let kDotV = k.dot(this);\n        return this.mul(c).add(kCrossV.mul(s)).add(k.mul(kDotV * (1 - c)));\n    }\n    lerp(a: Vec3, t: number): Vec3 {\n         return new Vec3(\n            a.x * t + this.x * (1 - t),\n            a.y * t + this.y * (1 - t),\n            a.z * t + this.z * (1 - t),\n         );\n    }\n    static zero = new Vec3(0, 0, 0);\n    static one = new Vec3(1, 1, 1);\n}\n\n\nexport class Vec4 {\n    x: number;\n    y: number;\n    z: number;\n    w: number;\n    constructor(x: number = 0.0, y: number = 0.0, z: number = 0.0, w: number = 1.0) {\n        this.x = +x;\n        this.y = +y;\n        this.z = +z;\n        this.w = +w;\n    }\n\n    getIdx(i: number): number {\n        switch (i) {\n        case 0: return this.x;\n        case 1: return this.y;\n        case 2: return this.z;\n        case 3: return this.w;\n        default: throw new Error(`Invalid index ${i}`);\n        }\n    }\n    add(a: Vec4): Vec4 { return new Vec4(this.x + a.x, this.y + a.y, this.z + a.z, this.w + a.w); }\n    sub(a: Vec4): Vec4 { return new Vec4(this.x - a.x, this.y - a.y, this.z - a.z, this.w - a.w); }\n    dot(a: Vec4): number { return this.x*a.x + this.y*a.y + this.z*a.z + this.w+a.w; }\n    mul(a: number): Vec4 { return new Vec4(this.x * a, this.y * a, this.z * a, this.w * a); }\n    lenSq(): number { return this.x*this.x + this.y*this.y + this.z*this.z + this.w*this.w; }\n    distSq(a: Vec4): number {\n        let dx = this.x - a.x;\n        let dy = this.y - a.y;\n        let dz = this.z - a.z;\n        let dw = this.w - a.w;\n        return dx * dx + dy * dy + dz * dz + dw * dw;\n    }\n    len(): number { return Math.sqrt(this.lenSq()); }\n    dist(a: Vec4): number { return Math.sqrt(this.distSq(a)); }\n    normalize(): Vec4 { return this.mul(1.0 / Math.sqrt(this.lenSq())); }\n    projToVec3(): Vec3 { return new Vec3(this.x / this.w, this.y / this.w, this.z / this.w); }\n    static lerp(a: Vec4, b: Vec4, t: number): Vec4 {\n        return a.add(b.sub(a).mul(t));\n    }\n    writeToBuf(buf: Float32Array, offset: number) {\n        buf[offset + 0] = this.x;\n        buf[offset + 1] = this.y;\n        buf[offset + 2] = this.z;\n        buf[offset + 3] = this.w;\n    }\n    static fromArray(a: ArrayLike<number>, offset: number = 0): Vec4 {\n        return new Vec4(a[offset + 0], a[offset + 1], a[offset + 2], a[offset + 3]);\n    }\n    static fromVec3(v: Vec3, w: number = 1.0): Vec4 {\n        return new Vec4(v.x, v.y, v.z, w);\n    }\n    toArray(): ArrayLike<number> {\n        return [this.x, this.y, this.z, this.w];\n    }\n    static fromHexColor(s: string, alpha: number = 1.0): Vec4 {\n        if (s.startsWith('#')) s = s.slice(1);\n        let hexVal = parseInt(s, 16);\n        let x = (hexVal >> 16) & 0xFF;\n        let y = (hexVal >> 8) & 0xFF;\n        let z = hexVal & 0xFF;\n        return new Vec4(x / 255.0 * alpha, y / 255.0 * alpha, z / 255.0 * alpha, alpha);\n    }\n    toHexColor(): string {\n        let toPair = (v: number) => Math.floor(v * 255).toString(16).padStart(2, '0');\n        return `#${toPair(this.x)}${toPair(this.y)}${toPair(this.z)}${toPair(this.w)}`;\n    }\n    toString(): string {\n        return `Vec4(${numMaxDp(this.x)}, ${numMaxDp(this.y)}, ${numMaxDp(this.z)}, ${numMaxDp(this.w)})`;\n    }\n}\n\nfunction numMaxDp(x: number, dp: number = 3) {\n    return parseFloat(x.toFixed(dp)).toString();\n}\n\nexport class BoundingBox3d {\n    public min: Vec3 = new Vec3();\n    public max: Vec3 = new Vec3();\n    public empty: boolean = true;\n\n    constructor(...args: Array<Vec3>) {\n        for (let v of args)\n            this.addInPlace(v);\n    }\n\n    addInPlace(v: Vec3) {\n        if (this.empty) {\n            this.min.x = v.x;\n            this.min.y = v.y;\n            this.min.z = v.z;\n            this.max.x = v.x;\n            this.max.y = v.y;\n            this.max.z = v.z;\n            this.empty = false;\n        } else {\n            this.min.x = Math.min(this.min.x, v.x);\n            this.min.y = Math.min(this.min.y, v.y);\n            this.min.z = Math.min(this.min.z, v.z);\n            this.max.x = Math.max(this.max.x, v.x);\n            this.max.y = Math.max(this.max.y, v.y);\n            this.max.z = Math.max(this.max.z, v.z);\n        }\n        return this;\n    }\n\n    combineInPlace(v: BoundingBox3d) {\n        return v.empty ? this : this.addInPlace(v.min).addInPlace(v.max);\n    }\n\n    center(): Vec3 {\n        let a = this.max;\n        let b = this.min;\n        return new Vec3(\n            a.x + 0.5 * (b.x - a.x),\n            a.y + 0.5 * (b.y - a.y),\n            a.z + 0.5 * (b.z - a.z));\n    }\n\n    size(): Vec3 {\n        return this.max.sub(this.min);\n    }\n\n    contains(p: Vec3) {\n        return !this.empty &&\n            p.x >= this.min.x && p.x <= this.max.x &&\n            p.y >= this.min.y && p.y <= this.max.y &&\n            p.z >= this.min.z && p.z <= this.max.z;\n    }\n\n    intersects(b: BoundingBox3d) {\n        return !this.empty && !b.empty &&\n            this.max.x >= b.min.x && this.min.x <= b.max.x &&\n            this.max.y >= b.min.y && this.min.y <= b.max.y &&\n            this.max.z >= b.min.z && this.min.z <= b.max.z;\n    }\n\n    expandInPlace(border: number) {\n        if (!this.empty) {\n            this.min.x -= border;\n            this.min.y -= border;\n            this.min.z -= border;\n            this.max.x += border;\n            this.max.y += border;\n            this.max.z += border;\n        }\n        return this;\n    }\n\n    shrinkInPlaceXY(inset: number) {\n        if (!this.empty) {\n            this.min.x += inset;\n            this.min.y += inset;\n            this.max.x -= inset;\n            this.max.y -= inset;\n            if (this.min.x > this.max.x || this.min.y > this.max.y) {\n                this.empty = true;\n                this.min = new Vec3();\n                this.max = new Vec3();\n            }\n        }\n        return this;\n    }\n\n    clone(): BoundingBox3d {\n        let b = new BoundingBox3d();\n        b.min = this.min.clone();\n        b.max = this.max.clone();\n        b.empty = this.empty;\n        return b;\n    }\n\n    toString(): string {\n        return `BoundingBox3d(${this.min}, ${this.max})`;\n    }\n}\n\n// static functions that operate on Float32Arrays (or Float64Arrays)\n// all functions are in-place, and read/write from specified offsets\n// safe to use with the same array for both input and output\n\nexport type IArr = Float32Array | Float64Array;\n\nexport class Vec3Buf {\n\n    static add_(a: IArr, aOff: number, b: IArr, bOff: number, out: IArr, outOff: number) {\n        out[outOff + 0] = a[aOff + 0] + b[bOff + 0];\n        out[outOff + 1] = a[aOff + 1] + b[bOff + 1];\n        out[outOff + 2] = a[aOff + 2] + b[bOff + 2];\n    }\n\n    static sub_(a: IArr, aOff: number, b: IArr, bOff: number, out: IArr, outOff: number) {\n        out[outOff + 0] = a[aOff + 0] - b[bOff + 0];\n        out[outOff + 1] = a[aOff + 1] - b[bOff + 1];\n        out[outOff + 2] = a[aOff + 2] - b[bOff + 2];\n    }\n\n    static copy_(a: IArr, aOff: number, out: IArr, outOff: number) {\n        out[outOff + 0] = a[aOff + 0];\n        out[outOff + 1] = a[aOff + 1];\n        out[outOff + 2] = a[aOff + 2];\n    }\n\n    static normalize_(a: IArr, aOff: number, out: IArr, outOff: number) {\n        let x = a[aOff + 0];\n        let y = a[aOff + 1];\n        let z = a[aOff + 2];\n        let lenInv = 1.0 / Math.sqrt(x * x + y * y + z * z);\n        out[outOff + 0] = x * lenInv;\n        out[outOff + 1] = y * lenInv;\n        out[outOff + 2] = z * lenInv;\n    }\n\n    static len_(a: Float32Array, aOff: number): number {\n        let x = a[aOff + 0];\n        let y = a[aOff + 1];\n        let z = a[aOff + 2];\n        return Math.sqrt(x * x + y * y + z * z);\n    }\n}\n\nexport class Vec4Buf {\n    static copy_(a: IArr, aOff: number, out: IArr, outOff: number) {\n        out[outOff + 0] = a[aOff + 0];\n        out[outOff + 1] = a[aOff + 1];\n        out[outOff + 2] = a[aOff + 2];\n        out[outOff + 3] = a[aOff + 3];\n    }\n}\n\nexport function segmentNearestPoint(p0: Vec3, p1: Vec3, x: Vec3) {\n    let v = p1.sub(p0);\n    let w = x.sub(p0);\n    let t = clamp(w.dot(v) / v.dot(v), 0, 1);\n    return p0.mulAdd(v, t);\n}\n\nexport function segmentNearestT(p0: Vec3, p1: Vec3, x: Vec3) {\n    let v = p1.sub(p0);\n    let w = x.sub(p0);\n    return clamp(w.dot(v) / v.dot(v), 0, 1);\n}\n\n// project x onto v\nexport function projectOntoVector(x: Vec3, v: Vec3) {\n    return v.mul(x.dot(v) / v.dot(v));\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"popup\":\"Portal_popup__YM1hF\",\"popupBackdrop\":\"Portal_popupBackdrop___vhK5\",\"popup-backdrop-fadein\":\"Portal_popup-backdrop-fadein__7OqfR\",\"fullscreenOverlay\":\"Portal_fullscreenOverlay__G53p6\",\"modalWindowBackdrop\":\"Portal_modalWindowBackdrop__CaLY_\",\"modalWindow\":\"Portal_modalWindow__h65zy\"};"],"names":["PopupPos","Portal","children","param","portalEl","setPortalEl","useState","useLayoutEffect","document","getElementById","createPortal","FullscreenOverlay","className","onClick","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","jsx","div","clsx","s","ev","stopPropagation","target","currentTarget","ModalWindow","backdropClassName","onBackdropClick","TopLeft","BottomLeft","Popup","targetEl","placement","closeBackdrop","onClose","offsetX","offsetY","popupEl","setPopupEl","pos","computeTransform","targetBcr","popupBcr","x","y","bottom","height","useWatchElementRect","el","ref","style","transform","concat","left","top","onMouseMove","onMouseUp","onMouseDown","includePosition","bcr","setBcr","handleChange","getBoundingClientRect","prev","assignImm","width","observer","ResizeObserver","observe","unobserve","makeArray","length","val","fill","makeArrayRange","min","max","map","_","i","oneHotArray","index","defaultVal","arr","source","keys","Object","changed","k","src","dst","Date","Vec3","distSq","assign","assignImmFull","isNil","a","isNotNil","clamp","num","base64ToArrayBuffer","base64","binaryString","window","atob","len","bytes","Uint8Array","charCodeAt","buffer","getOrAddToMap","key","valueFn","existing","get","undefined","value","set","hasFlag","flags","flag","useFunctionRef","fn","useRef","useEffect","current","useRequestAnimationFrame","active","cb","cbRef","handle","prevTime","stale","requestAnimationFrame","loop","time","dt","cancelAnimationFrame","useInterval","delay","opts","runImmediately","setInterval","clearInterval","Subscriptions","subs","Set","subscribe","add","delete","notify","sub","useSubscriptions","subscription","refresh","useReducer","useScreenLayout","layout","setLayout","isDesktop","isPhone","mediaQuery","matchMedia","handleResize","innerWidth","innerHeight","matches","addEventListener","removeEventListener","useResizeChangeHandler","handler","handlerRef","disconnect","Dim","X","Y","Z","z","dot","mul","mulAdd","b","lenSq","dx","dy","dz","Math","sqrt","dist","normalize","mid","abs","clone","toVec4","Vec4","round","round_","copy_","cross","writeToBuf","buf","offset","fromArray","setAt","v","addAt","getAt","withSetAt","withAddAt","toString","dp","numMaxDp","rotateAbout","thetaRad","c","cos","sin","kCrossV","kDotV","lerp","t","constructor","zero","one","getIdx","w","dw","projToVec3","fromVec3","toArray","fromHexColor","alpha","startsWith","slice","hexVal","parseInt","toHexColor","toPair","floor","padStart","parseFloat","toFixed","BoundingBox3d","addInPlace","empty","combineInPlace","center","size","contains","p","intersects","expandInPlace","border","shrinkInPlaceXY","inset","args","Vec3Buf","add_","aOff","bOff","out","outOff","sub_","normalize_","lenInv","len_","segmentNearestPoint","p0","p1","segmentNearestT","projectOntoVector","module","exports"],"sourceRoot":""}